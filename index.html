
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kakuma Health Tracker</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f5f5f5; color:#333; }
header { background:#1976d2; color:white; padding:1rem; text-align:center; }
main { padding:2rem; max-width:900px; margin:auto; }
#controls { display:flex; gap:0.5rem; margin-bottom:1rem; flex-wrap:wrap; }
input, select, button { padding:0.5rem; font-size:1rem; border-radius:5px; border:1px solid #ccc; }
button { background:#1976d2; color:white; border:none; cursor:pointer; }
button:hover { background:#115293; }
#records-container { display:grid; gap:1rem; margin-top:1rem; }
.record-card { background:white; padding:1rem; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
.record-card:hover { transform:translateY(-3px); transition:0.2s; }
#chart-section { margin:2rem 0; background:white; padding:1rem; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
footer { text-align:center; padding:1rem; margin-top:2rem; font-size:0.9rem; }
</style>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<header>
  <h1>Kakuma Health Tracker</h1>
  <p>Tracking malaria and water-borne disease cases by zone</p>
</header>

<main>
  <section id="controls">
    <input type="text" id="search-input" placeholder="Search by zone...">
    <select id="sort-select">
      <option value="malaria">Malaria Cases</option>
      <option value="waterborne">Water-Borne Cases</option>
    </select>
    <button id="sort-order-btn">Asc</button>
  </section>

  <section id="stats">
    <p id="summary">Loading Kakuma health stats...</p>
  </section>

  <section id="chart-section">
    <canvas id="healthChart" width="800" height="400"></canvas>
  </section>

  <section id="records">
    <div id="records-container"></div>
  </section>
</main>

<footer>
  <p>&copy; 2025 Kakuma Health Tracker | Firebase powered</p>
</footer>

<!-- ===============  FIREBASE + APP LOGIC  =================== -->
<script type="module">

// Firebase Imports
import { initializeApp } 
  from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
import { 
  getFirestore, collection, getDocs 
} from "https://www.gstatic.com/firebasejs/11.0.0/firebase-firestore.js";

// Replace with your Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyDy8aDB48XMtsqLM6KrIVcasEJTuYD6m4Q",
  authDomain: "kakuma-health-tracker.firebaseapp.com",
  projectId: "kakuma-health-tracker",
  storageBucket: "kakuma-health-tracker.firebasestorage.app",
  messagingSenderId: "491006632982",
  appId: "1:491006632982:web:5a4a125aeb7bcb91090137",
  measurementId: "G-Q4BGTDJMKM"
};

// Initialize Firebase & Firestore
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// UI elements
const recordsContainer = document.getElementById('records-container');
const searchInput = document.getElementById('search-input');
const sortSelect = document.getElementById('sort-select');
const sortOrderBtn = document.getElementById('sort-order-btn');
const summary = document.getElementById('summary');

let data = [];   // Firebase data storage
let chart;
let sortAsc = true;

// Load data from Firestore
async function loadData(){
  const colRef = collection(db, "health_zones");
  const snapshot = await getDocs(colRef);
  
  data = snapshot.docs.map(doc => ({
    id: doc.id,
    zone:doc.id,
    malaria: doc.data().malaria_count,
    waterborne: doc.data().waterborne_count,
    
  }));
  
  updateSummary();
  renderData(data);
  renderChart(data);
}

// Update summary totals
function updateSummary() {
  const totalMalaria = data.reduce((sum,c)=>sum+c.malaria,0);
  const totalWater = data.reduce((sum,c)=>sum+c.waterborne,0);
  summary.textContent = `Total Malaria Cases: ${totalMalaria}, Total Water-Borne Cases: ${totalWater}`;
}

// Render cards
function renderData(list) {
  if(list.length === 0){
    recordsContainer.innerHTML = '<p>No records found.</p>';
    return;
  }
  recordsContainer.innerHTML = list.map(item => `
    <div class="record-card">
      <h3>${item.zone}</h3>
      <p>Malaria Cases: ${item.malaria}</p>
      <p>Water-Borne Cases: ${item.waterborne}</p>
    </div>
  `).join('');
}

// Render chart
function renderChart(list){
  const labels = list.map(z => z.zone);
  const malariaData = list.map(z => z.malaria);
  const waterData = list.map(z => z.waterborne);

  if(chart) chart.destroy();

  const ctx = document.getElementById('healthChart').getContext('2d');
  chart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels,
      datasets: [
        { label: 'Malaria', data: malariaData, backgroundColor: 'rgba(229,57,53,0.6)' },
        { label: 'Water-Borne', data: waterData, backgroundColor: 'rgba(30,136,229,0.6)' }
      ]
    },
    options: {
      responsive:true,
      plugins: {
        legend: { position:'top' },
        title: { display:true, text:'Kakuma Health Cases by Zone' }
      }
    }
  });
}

// Search
searchInput.addEventListener('input', () => {
  const term = searchInput.value.toLowerCase();
  const filtered = data.filter(d => d.zone.toLowerCase().includes(term));
  renderData(filtered);
  renderChart(filtered);
});

// Sorting
function sortData(){
  const key = sortSelect.value;
  const sorted = [...data].sort((a,b)=>{
    return sortAsc ? a[key] - b[key] : b[key] - a[key];
  });
  renderData(sorted);
  renderChart(sorted);
}

sortSelect.addEventListener('change', sortData);
sortOrderBtn.addEventListener('click', ()=>{
  sortAsc = !sortAsc;
  sortOrderBtn.textContent = sortAsc ? 'Asc' : 'Desc';
  sortData();
});

// Start loading
loadData();

</script>

</body>
</html>
kakuma.html
Displaying kakuma.html.